webpackJsonp([40],{VlR1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),s=a("Dd8w"),c=a.n(s),l=a("NYxO"),u=a("3pLw"),d={data:function(){return{params:{dialog:!1,sounds:!0},showPage:!1,theme:localStorage.getItem("t_theme")||"dark",utc:JSON.parse(localStorage.getItem("utc")||null),locale_name:localStorage.getItem("locale_name")}},computed:c()({},Object(l.c)({userInfo:"user/userInfo",isLogin:"user/isLogin"})),created:function(){},mounted:function(){},methods:c()({},Object(l.b)("user",{logout:"logout",setuserconfig:"setuserconfig",userconfigquery:"userconfigquery",updateUserBasic:"updateUserBasic"}),Object(l.d)("user",{updateUser:"UPDATE_USER",quitLogin:"quitLogin"}),{getLocaleName:function(){var t=this;this.querylist().then(function(e){var a=e.data||[],n=localStorage.getItem("locale")||"en_US",r=a.find(function(t){return t.locale==n});t.locale_name=r.englishName})},bankCards:function(){this.$router.push("/bankcard")},afterRead:function(t){var e=this;return i()(r.a.mark(function a(){var n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e,e.$toast.loading({message:e.$t("load.txt4"),duration:0,forbidClick:!0}),o=t.file,["image/jpeg","image/pjpeg","image/png"].includes(o.type)){a.next=8;break}return e.errDialog(e.$t("sys.imgErr")),a.abrupt("return");case 8:if(!(o.size.toFixed(2)>6291456)){a.next=11;break}return e.errDialog(e.$t("sys.uploadSize")),a.abrupt("return");case 11:u.a.postFormData("/upload/s3",{file:o,folder:"file"}).then(function(t){0==t.code?n.updateUserBasic({userId:e.userInfo.id,headImg:t.data}).then(function(e){0==e.code&&n.updateUser({headImg:t.data})}):e.errDialog(t.msg)}).catch(function(t){}).finally(function(t){e.$toast.clear()});case 13:case"end":return a.stop()}},a,e)}))()},btnQuitClick:function(){var t=this;this.$dialog.confirm({title:"",message:this.$t("my.txt31"),cancelButtonText:this.$t("dialog.txt2"),confirmButtonText:this.$t("dialog.txt1")}).then(function(){t.logout(),localStorage.removeItem("token"),localStorage.removeItem("USER_INFO"),localStorage.clear(),localStorage.setItem("_is_first_open",(new Date).getTime()),t.quitLogin(),window.location.href="/"}).catch(function(){})}})},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modMain",{staticClass:"setting",attrs:{title:t.$t("my.txt13")}},[n("div",{staticClass:"form-group"},[n("van-form",[t.userInfo.username?[n("div",{staticClass:"head-avatar"},[n("label",[t._v(t._s(t.$t("my.txt29")))]),t._v(" "),n("van-uploader",{attrs:{"after-read":t.afterRead,accept:"image/*","max-count":1}},[n("div",{staticClass:"avatar"},[t.userInfo&&t.userInfo.headImg?[n("img",{attrs:{src:t.imgBaseUrl+t.userInfo.headImg,alt:""}})]:[n("img",{attrs:{src:a("6sqG"),alt:""}})],t._v(" "),n("van-icon",{attrs:{name:"arrow van-cell__right-icon"}})],2)])],1)]:t._e(),t._v(" "),t.userInfo&&t.userInfo.username?n("van-cell",{attrs:{title:t.$t("my.txt33"),"is-link":""},on:{click:t.bankCards}}):t._e(),t._v(" "),n("van-cell",{attrs:{title:t.$t("my.txt30"),to:"/reset","is-link":""}})],2),t._v(" "),t.userInfo&&t.userInfo.username?n("div",{staticClass:"btn-box btn-fixed"},[n("base-btn",{attrs:{btnTitle:t.$t("my.txt28"),disabled:!1},on:{btnClick:t.btnQuitClick}})],1):t._e()],1)])},staticRenderFns:[]};var g=a("VU/8")(d,f,!1,function(t){a("efQS")},"data-v-9c9bfc38",null);e.default=g.exports},efQS:function(t,e){}});