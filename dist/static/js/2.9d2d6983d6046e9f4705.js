webpackJsonp([2],{"F/qF":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("mvHQ"),o=t.n(s),a=t("woOf"),i=t.n(a),n=t("Xxa5"),c=t.n(n),m=t("exGp"),u=t.n(m),l=t("Dd8w"),d=t.n(l),f=t("NYxO"),g=t("DmJg"),p={components:{switchLogin:t("VTkQ").default,Download:g.default},data:function(){return{inputType:"text",isShowLoadding:!1,isErrorMobile:!1,isErrorEmail:!1,isErrorPwd:!1,isErrorCode:!1,isShowOrgCode:!1,isAgree:!0,form:{username:"",password:"",password2:"",registerType:"PHONE",authorityType:"CLIENT",platform:"H5",areaCode:"62",verifyCode:"",source:1,symbolCode:null,email:"",sessionId:""},code:"",bannerList:null,wathsrls:""}},computed:d()({},Object(f.c)({checkType:"getCheckType",switchType:"getSwitchType",getcurrentGame:"trade/getcurrentGame"}),{areaItem:function(){return this.$store.getters.getAreaCode()},cssSkin:function(){return this.$store.getters.getCssSkin()},disabled:function(){if(this.isEmail){var e=""==this.form.username||""==this.form.password||""==this.form.password2;return e||""==this.code}return""==this.form.username||""==this.form.password||""==this.form.password2||""==this.imgCode},loginDisabled:function(){return""==this.form.username||""==this.form.password},isEmail:function(){return"EMAIL"===this.switchType}}),watch:{checkType:function(e,r){localStorage.removeItem("password"),this.form.password="",this.checkType?this.form.username="":this.form.username=localStorage.getItem("logo_username")||""}},created:function(){var e=this.$route.meta.pathName,r=e&&"register"==e;this.setCheckType(r);var t=localStorage.getItem("password")||"",s=localStorage.getItem("logo_username")||"";this.form.username=s,this.form.password=t},mounted:function(){},beforeRouteEnter:function(e,r,t){t(function(e){if("/verification"==r.path&&r.query.data){var t=JSON.parse(r.query.data);e.form.username=t.username,e.form.password=t.password}})},beforeRouteLeave:function(e,r,t){"/areacode"!=e.path&&"/reset"!=e.path||(localStorage.setItem("logo_username",this.form.username),localStorage.setItem("password",this.form.password)),t()},methods:d()({},Object(f.b)("user",{register:"register",login:"login",verifyUsername:"verifyUsername",codeVerify:"codeVerify",linkquery:"linkquery",_verifyCode:"verifyCode"}),Object(f.d)({setCheckType:"SET_PLAT_TYPE",setSwitchType:"SET_SWITCH_TYPE"}),{getImgCode:function(){this.$refs.imgCode.getCodeImg()},swiperClick:function(e){var r=e.skipUrl;r&&window.open(r,"_blank")},btnRegister:function(){var e=this;return u()(c.a.mark(function r(){var t,s,o,a,i,n,m;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.form.sessionId=sessionStorage.getItem("sessionId")||"",e.isAgree){r.next=4;break}return e.errDialog(e.$t("reglogin.txt13")),r.abrupt("return");case 4:if(e.form.registerType=e.switchType,e.form.areaCode=e.isEmail?null:e.areaItem.code,!e.isEmail){r.next=12;break}if(e.isErrorEmail=!e.onFailed({name:"email",value:e.form.username}),!e.isErrorEmail){r.next=10;break}return r.abrupt("return");case 10:r.next=18;break;case 12:if(0==e.form.username.substring(0,1)&&(e.form.username=e.form.username.substr(1)),!(e.form.username.length<10||e.form.username.length>11)&&/^[0-9]*$/.test(e.form.username)){r.next=18;break}return e.isErrorMobile=!0,e.errDialog(e.$t("reglogin.txt14")),r.abrupt("return");case 18:if(e.form.password==e.form.password2){r.next=21;break}return e.errDialog(e.$t("reglogin.txt15")),r.abrupt("return");case 21:if(!e.isEmail){r.next=28;break}if(""!=e.code){r.next=26;break}return e.errDialog(e.$t("reglogin.txt16")),e.isErrorCode=!0,r.abrupt("return");case 26:r.next=32;break;case 28:if(""!=e.imgCode){r.next=32;break}return e.errDialog(e.$t("reglogin.txt16")),e.isErrorCode=!0,r.abrupt("return");case 32:return e.isEmail||0==e.form.username.substring(0,1)&&(e.form.username=e.form.username.substr(1)),r.next=35,e.verifyUsername({username:e.form.username});case 35:if(t=r.sent,s=!1,0!=t.code){r.next=47;break}if(!t.data){r.next=44;break}return s=!1,e.errDialog(e.$t("reglogin.txt17")),r.abrupt("return");case 44:s=!0;case 45:r.next=50;break;case 47:return s=!1,e.errDialog(t.msg||e.$t("reglogin.txt18")),r.abrupt("return");case 50:if(o=!1,!e.isEmail){r.next=59;break}return a={mobilePhone:e.form.username,code:e.isEmail?e.code:e.imgCode},r.next=55,e.codeVerify(a);case 55:(i=r.sent)&&0==i.code?o=!0:(o=!1,e.errDialog(i.msg)),r.next=72;break;case 59:return n={sessionId:e.form.sessionId,code:e.imgCode},r.next=62,e._verifyCode(n);case 62:if(0!=(m=r.sent).code){r.next=71;break}if(o=!0,m.data){r.next=69;break}return e.errDialog("Kesalahan input kode verifikasi grafis"),e.getImgCode(),r.abrupt("return");case 69:r.next=72;break;case 71:o=!1;case 72:if(!s||!o){r.next=75;break}return r.next=75,e._register();case 75:case"end":return r.stop()}},r,e)}))()},_register:function(){var e=this;this.isEmail?this.form.verifyCode=this.code:this.form.verifyImageCode=this.imgCode;var r=i()({},this.form);r.platform="H5";var t=this.encrypt(o()(r));this.register(t).then(function(r){if(0==r.code){var t={platform:"H5",username:e.form.username,password:e.form.password,areaCode:e.form.areaCode,authorityType:"CLIENT"};localStorage.removeItem("_is_first_open"),localStorage.removeItem("password"),e.toLogin(t)}else e.errDialog(r.msg),e.getImgCode()})},btnLogin:function(){var e=this;return u()(c.a.mark(function r(){var t;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.form.username.indexOf("@")>-1,e.setSwitchType(t?"EMAIL":"PHONE"),!t){r.next=9;break}if(e.form.registerType="EMAIL",e.isErrorEmail=!e.onFailed({name:"email",value:e.form.username}),!e.isErrorEmail){r.next=7;break}return r.abrupt("return");case 7:r.next=14;break;case 9:if(e.form.registerType="PHONE",!(e.form.username.length<5)&&/^[0-9]*$/.test(e.form.username)){r.next=14;break}return e.isErrorMobile=!0,e.errDialog(e.$t("reglogin.txt14")),r.abrupt("return");case 14:e.form.areaCode=t?null:e.areaItem.code,e.toLogin();case 16:case"end":return r.stop()}},r,e)}))()},toLogin:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u()(c.a.mark(function t(){var s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isShowLoadding=!0,s=r||e.form,t.next=4,e.login(s);case 4:o=t.sent,e.isShowLoadding=!1,localStorage.setItem("logo_username",s.username),0===o.code?e.$router.replace({path:"/"}):(o.code,e.errDialog(o.msg));case 8:case"end":return t.stop()}},t,e)}))()},openXy:function(e){this.$router.push({path:"/xieyi",query:{type:e}})}}),beforeDestroy:function(){this.isShowLoadding=!1}},h={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("modMain",{staticClass:"noPadding register-login",attrs:{title:e.checkType?e.$t("my.txt16"):e.$t("my.txt17")}},[t("div",{staticClass:"login-main"},[t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-title"},[e.checkType?t("switch-login"):t("p",[e._v(e._s(e.$t("my.txt17")))])],1),e._v(" "),"PHONE"==e.switchType&&e.checkType?t("base-phone",{attrs:{type:"text",placeholder:e.checkType?e.$t("reglogin.txt2"):e.$t("reglogin.txt1")},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username","string"==typeof r?r.trim():r)},expression:"form.username"}}):e._e(),e._v(" "),t("base-input",{directives:[{name:"show",rawName:"v-show",value:!e.checkType,expression:"!checkType"}],attrs:{type:"text",placeholder:e.$t("reglogin.txt1")},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username","string"==typeof r?r.trim():r)},expression:"form.username"}}),e._v(" "),t("base-input",{directives:[{name:"show",rawName:"v-show",value:"EMAIL"==e.switchType&&e.checkType,expression:"switchType == 'EMAIL' && checkType"}],attrs:{type:"text",isError:e.isErrorEmail,placeholder:e.$t("reglogin.txt3")},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username","string"==typeof r?r.trim():r)},expression:"form.username"}}),e._v(" "),t("base-input",{attrs:{isError:e.isErrorPwd,type:"password",placeholder:e.$t("reglogin.txt4")},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password","string"==typeof r?r.trim():r)},expression:"form.password"}}),e._v(" "),e.checkType?[t("base-input",{attrs:{isError:e.isErrorPwd,type:"password",placeholder:e.$t("reglogin.txt5")},model:{value:e.form.password2,callback:function(r){e.$set(e.form,"password2","string"==typeof r?r.trim():r)},expression:"form.password2"}}),e._v(" "),"PHONE"==e.switchType?t("base-code",{ref:"imgCode",attrs:{isError:e.isErrorCode},model:{value:e.imgCode,callback:function(r){e.imgCode=r},expression:"imgCode"}}):t("baseSend",{ref:"sendPhone",attrs:{type:"text",sendData:e.form,placeholder:e.$t("reglogin.txt6"),isError:e.isErrorCode},model:{value:e.code,callback:function(r){e.code=r},expression:"code"}})]:e._e(),e._v(" "),e.checkType?e._e():[t("div",{staticClass:"forgot"},[t("p",[t("span",{on:{click:function(r){return e.$router.push("/reset")}}},[e._v(e._s(e.$t("reglogin.txt9")))])])])],e._v(" "),e.checkType?[t("div",{staticClass:"register-agree"},[t("span",{staticClass:"agree-icon",class:{tongyi:e.isAgree},on:{click:function(r){e.isAgree=!e.isAgree}}}),e._v(" "),t("p",{staticClass:"agree-txt"},[e._v("\n            "+e._s(e.$t("reglogin.txt19"))+"\n            "),t("span",{on:{click:function(r){return e.openXy(1)}}},[e._v(e._s(e.$t("reglogin.txt8")))])])])]:e._e(),e._v(" "),t("div",{staticClass:"btn-wrap",class:[e.checkType?"reg":"login"]},[e.checkType?[t("base-btn",{attrs:{btnTitle:e.$t("my.txt16"),disabled:e.disabled},on:{btnClick:e.btnRegister}})]:[t("base-btn",{attrs:{btnTitle:e.$t("my.txt17"),disabled:e.loginDisabled},on:{btnClick:e.btnLogin}})],e._v(" "),t("group-service",{ref:"groupService"})],2)],2),e._v(" "),t("download",{attrs:{checkType:e.checkType}})],1),e._v(" "),e.isShowLoadding?t("loadding"):e._e()],1)},staticRenderFns:[]};var b=t("VU/8")(p,h,!1,function(e){t("vGKE")},"data-v-94d5093c",null);r.default=b.exports},vGKE:function(e,r){}});